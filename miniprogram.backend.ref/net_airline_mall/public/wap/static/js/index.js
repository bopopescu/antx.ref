(function(e){function t(t){for(var n,i,c=t[0],u=t[1],s=t[2],d=0,p=[];d<c.length;d++)i=c[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var u=a[c];0!==r[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={index:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;o.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2856:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e7e5");var n=a("d399"),r=(a("a481"),a("cadf"),a("551c"),a("097d"),a("2b0e")),o=a("bc3a"),i=a.n(o),c=a("18a0"),u=a.n(c),s=a("4328"),l=a.n(s),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},p=[],f=(a("28a5"),a("dfa4"),{name:"app",data:function(){return{}},mounted:function(){var e=localStorage.getItem("userRegion"),t=this;e||navigator.geolocation.getCurrentPosition(t.showPosition,t.showErr),this.jssdkConfig()},computed:{},methods:{jssdkConfig:function(){this.$http.post("/api/v4/wechat/jssdk",l.a.stringify({url:window.location.href.split("#")[0]})).then(function(e){var t=e.data;"success"==t.status&&u.a.config(t.data)})},showPosition:function(e){var t=e.coords.latitude,a=e.coords.longitude;this.position(t,a)},showErr:function(e){this.position(31.23037,121.4737)},position:function(e,t){this.$http.get("/api/v4/misc/position",{params:{lat:e,lng:t}}).then(function(a){var n=a.data.data;if(n){var r={province:{id:n.province_id,name:n.province},city:{id:n.city_id,name:n.city},district:{id:n.district_id,name:n.district},postion:{lat:e,lng:t}};localStorage.setItem("userRegion",JSON.stringify(r))}})}}}),h=f,m=(a("5c0b"),a("2877")),g=Object(m["a"])(h,d,p,!1,null,null,null);g.options.__file="App.vue";var y=g.exports,v=a("41cb"),b=a("4360");a("c6e4"),a("b54a");function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=e.desc,n=e.link,r=e.imgUrl;u.a.ready(function(){u.a.hideMenuItems({menuList:["menuItem:copyUrl"],success:function(){}}),u.a.updateAppMessageShareData({title:t,desc:a,link:n,imgUrl:r,success:function(){},cancel:function(){}}),u.a.updateTimelineShareData({title:t,desc:a,link:n,imgUrl:r,success:function(e){},cancel:function(){}})}),u.a.error(function(e){console.log(JSON.stringify(e))})}var w=a("bf0f"),k=a("27ae");r["default"].prototype.$wxShare=_,r["default"].config.productionTip=!1,r["default"].prototype.$http=i.a;var S=document.head.querySelector('meta[name="csrf-token"]');S&&(i.a.defaults.headers.common["X-CSRF-TOKEN"]=S.content),i.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.a.defaults.headers.common["token"]=localStorage.getItem("token")||null,i.a.defaults.headers.common["userRegion"]=k["Base64"].encode(localStorage.getItem("userRegion"))||null,v["a"].beforeEach(function(e,t,a){_({title:e.meta.title||"",desc:e.meta.desc||"",link:"".concat(window.ROOT_URL,"mobile/#")+e.path,imgUrl:e.meta.imgUrl||""}),"undefined"!==typeof _hmt&&e.path&&_hmt.push(["_trackPageview"],"".concat(window.ROOT_URL,"mobile/#")+e.fullPath),b["a"].state.token=localStorage.getItem("token"),i.a.defaults.headers.common["token"]=localStorage.getItem("token");var n=localStorage.getItem("parent_id")?localStorage.getItem("parent_id"):t.query.parent_id;if(window.ecjiahash=e.query.ecjiahash?e.query.ecjiahash:"",window.ecjiahash)return b["a"].dispatch("userLogout"),b["a"].dispatch("userRegister",{ecjiahash:e.query.ecjiahash}).then(function(t){localStorage.setItem("token",t.data),b["a"].state.token=t.data,delete e.query.ecjiahash,v["a"].push({path:e.path,query:e.query}),a()}),!1;if(e.meta.requireAuth)if(null!==b["a"].state.token)if(e.meta.supplierAuth&&b["a"].dispatch("setSupplier").then(function(e){"success"==e.status&&(b["a"].state.supplierLoading=!e.data)}),t.query.parent_id!=n&&(n=t.query.parent_id),e.query.parent_id!=n&&null!=n){var r=e.query;r.parent_id=n,a({path:e.path,query:r})}else a();else a({path:"/login",query:{redirect:e.fullPath}});else if(null==b["a"].state.token&&e.query.parent_id&&(localStorage.setItem("parent_id",e.query.parent_id),n=localStorage.getItem("parent_id")),e.query.parent_id!=n&&null!=n){var o=e.query;o.parent_id=n,a({path:e.path,query:o})}else a();e.meta.title&&(document.title=e.meta.title?e.meta.title:window.pageTitle)});var q=0;v["a"].afterEach(function(e,t){"/"!==e.path?document.body.scrollTop=0:r["default"].nextTick(function(){document.body.scrollTop=q})}),i.a.interceptors.request.use(function(e){var t=localStorage.getItem("client_hash")||"";return e.headers["x-client-hash"]=t,e},function(e){return Promise.reject(e)}),i.a.interceptors.response.use(function(e){var t="";for(var a in e.headers)"x-client-hash"===a.toLowerCase()&&(t=e.headers[a]);if(t&&localStorage.setItem("client_hash",t),"failed"===e.data.status)switch(e.data.errors.code){case 12:v["a"].replace({name:"login",query:{redirect:v["a"].currentRoute.fullPath}});break;case 404:Object(n["a"])("暂无记录"),v["a"].replace({name:"home"});break;case 506:Object(n["a"])("存在违禁词");break;case 102:Object(n["a"])("用户数据错误，请重新登录"),localStorage.removeItem("token"),localStorage.removeItem("parent_id"),v["a"].replace({name:"login",query:{redirect:v["a"].currentRoute.fullPath}});break;default:}return e},function(e){return Promise.reject(e)}),new r["default"]({router:v["a"],store:b["a"],i18n:w["a"],render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("2856"),r=a.n(n);r.a}});